@model BanqueProjet.Web.Models.DdpViewModel
@{
    ViewData["Title"] = "Créer un projet";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Create" method="post">
    <ul class="nav nav-tabs" id="wizardTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="onglet1-tab" data-bs-toggle="tab" data-bs-target="#onglet1" type="button" role="tab">Général</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="onglet2-tab" data-bs-toggle="tab" data-bs-target="#onglet2" type="button" role="tab">Budget</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="onglet3-tab" data-bs-toggle="tab" data-bs-target="#onglet3" type="button" role="tab">Planning</button>
        </li>
    </ul>
    <div class="tab-content p-3 border border-top-0" id="wizardTabsContent">
        <div class="tab-pane fade show active" id="onglet1" role="tabpanel">
            <div class="mb-3">
                <label asp-for="Projets.NomProjet" class="form-label"></label>
                <input asp-for="Projets.NomProjet" class="form-control" />
                <span asp-validation-for="Projets.NomProjet" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="Projets.Ministere" class="form-label"></label>
                <input asp-for="Projets.Ministere" class="form-control" />
                <span asp-validation-for="Projets.Ministere" class="text-danger"></span>
            </div>
        </div>
        <div class="tab-pane fade" id="onglet2" role="tabpanel">
            <div class="mb-3">
                <label asp-for="Projets.Section" class="form-label"></label>
                <input asp-for="Projets.Section" class="form-control" />
                <span asp-validation-for="Projets.Section" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="Projets.CodePip" class="form-label"></label>
                <input asp-for="Projets.CodePip" class="form-control" />
                <span asp-validation-for="Projets.CodePip" class="text-danger"></span>
            </div>
        </div>
        <div class="tab-pane fade" id="onglet3" role="tabpanel">
            <div class="mb-3">
                <label asp-for="Projets.DateInscription" class="form-label"></label>
                <input asp-for="Projets.DateInscription" type="date" class="form-control" />
                <span asp-validation-for="Projets.DateInscription" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="Projets.DateMiseAJour" class="form-label"></label>
                <input asp-for="Projets.DateMiseAJour" type="date" class="form-control" />
                <span asp-validation-for="Projets.DateMiseAJour" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-between mt-3">
        <button type="button" class="btn btn-secondary" id="prevBtn" disabled>Précédent</button>
        <button type="button" class="btn btn-primary" id="nextBtn">Suivant</button>
        <button type="submit" class="btn btn-success d-none" id="submitBtn">Enregistrer</button>
    </div>
</form>

@section Scripts {
    <script>
        (function () {
            var currentTab = 0;
            var tabs = Array.from(document.querySelectorAll('#wizardTabs button'));
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');
            var submitBtn = document.getElementById('submitBtn');

            function showTab(n) {
                tabs.forEach(function (tab, i) {
                    var pane = document.getElementById(tab.dataset.bsTarget.substring(1));
                    if (i === n) {
                        tab.classList.add('active');
                        pane.classList.add('show', 'active');
                    } else {
                        tab.classList.remove('active');
                        pane.classList.remove('show', 'active');
                    }
                });
                prevBtn.disabled = n === 0;
                nextBtn.classList.toggle('d-none', n === tabs.length - 1);
                submitBtn.classList.toggle('d-none', n < tabs.length - 1);
            }

            nextBtn.addEventListener('click', function () {
                if (currentTab < tabs.length - 1) {
                    currentTab++;
                    showTab(currentTab);
                }
            });

            prevBtn.addEventListener('click', function () {
                if (currentTab > 0) {
                    currentTab--;
                    showTab(currentTab);
                }
            });

            // Initial display
            showTab(currentTab);
        })();
    </script>
}
